{% extends "accounts/base_modern.html" %}

{% block extra_css %}
<style>
    body {
        background: white;
    }
</style>
{% endblock %}

{% block title %}{% if profile.is_conducteur %}Dashboard Conducteur{% elif profile.is_passager %}Dashboard Passager{% elif profile.is_gestionnaire %}Dashboard Gestionnaire{% else %}Dashboard{% endif %} - Transport Intelligent{% endblock %}

{% block content %}
<div class="mx-auto max-w-7xl space-y-6 p-6">
    <!-- Welcome Header -->
    <div class="rounded-2xl border border-gray-200 bg-white p-8">
        <div class="flex items-center justify-between">
            <div>
                {% if profile.is_conducteur %}
                    <h1 class="mb-2 text-3xl font-bold text-gray-900 text-gray-900">
                        <i class="fas fa-car mr-3 text-brand-600"></i>Dashboard Conducteur
                    </h1>
                    <p class="text-gray-600 text-gray-600">Bienvenue, <strong>{{ user.username }}</strong> ! Gérer vos trajets et véhicules.</p>
                {% elif profile.is_passager %}
                    <h1 class="mb-2 text-3xl font-bold text-gray-900 text-gray-900">
                        <i class="fas fa-user mr-3 text-brand-600"></i>Dashboard Passager
                    </h1>
                    <p class="text-gray-600 text-gray-600">Bienvenue, <strong>{{ user.username }}</strong> ! Recherchez et réservez vos trajets.</p>
                {% elif profile.is_gestionnaire %}
                    <h1 class="mb-2 text-3xl font-bold text-gray-900 text-gray-900">
                        <i class="fas fa-cog mr-3 text-brand-600"></i>Dashboard Gestionnaire Transport
                    </h1>
                    <p class="text-gray-600 text-gray-600">Bienvenue, <strong>{{ user.username }}</strong> ! Gérez votre système de transport.</p>
                {% else %}
                    <h1 class="mb-2 text-3xl font-bold text-gray-900 text-gray-900">
                        <i class="fas fa-tachometer-alt mr-3 text-brand-600"></i>Dashboard
                    </h1>
                    <p class="text-gray-600 text-gray-600">Bienvenue, <strong>{{ user.username }}</strong> !</p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Profil Info -->
    <div class="rounded-2xl border border-gray-200 bg-white">
        <div class="border-b border-gray-200 px-6 py-5border-gray-800">
            <h3 class="text-lg font-semibold text-gray-900 text-gray-900">
                <i class="fas fa-info-circle mr-2 text-brand-600"></i>Informations du Profil
            </h3>
        </div>
        <div class="p-6">
            <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
                <div class="flex items-center space-x-4">
                    <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-gray-100bg-gray-800">
                        <i class="fas fa-user text-gray-600 text-gray-600"></i>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500 text-gray-600">Rôle</p>
                        <p class="font-semibold text-gray-900 text-gray-900">{{ profile.get_role_display }}</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-gray-100bg-gray-800">
                        <i class="fas fa-envelope text-gray-600 text-gray-600"></i>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500 text-gray-600">Email</p>
                        <p class="font-semibold text-gray-900 text-gray-900">{{ user.email|default:"Non renseigné" }}</p>
                    </div>
                </div>
                {% if profile.telephone %}
                <div class="flex items-center space-x-4">
                    <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-gray-100bg-gray-800">
                        <i class="fas fa-phone text-gray-600 text-gray-600"></i>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500 text-gray-600">Téléphone</p>
                        <p class="font-semibold text-gray-900 text-gray-900">{{ profile.telephone }}</p>
                    </div>
                </div>
                {% endif %}
                {% if profile.linked_uri %}
                <div class="flex items-center space-x-4">
                    <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-gray-100bg-gray-800">
                        <i class="fas fa-link text-gray-600 text-gray-600"></i>
                    </div>
                    <div>
                        <p class="text-sm text-gray-500 text-gray-600">URI RDF</p>
                        <a href="{{ profile.linked_uri }}" target="_blank" class="font-semibold text-brand-600 hover:text-brand-700 text-brand-600hover:text-brand-300">Voir l'ontologie →</a>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Alertes Fuseki -->
    {% if not fuseki_available %}
    <div class="rounded-lg border border-orange-200 bg-orange-50 p-4 text-sm text-orange-800border-orange-900bg-orange-900text-orange-400">
        <i class="fas fa-exclamation-triangle mr-2"></i> Apache Fuseki n'est pas disponible. Veuillez démarrer le serveur Fuseki pour voir les données RDF.
    </div>
    {% elif sparql_error %}
    <div class="rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-800border-red-900bg-red-900text-red-400">
        <i class="fas fa-times-circle mr-2"></i> Erreur SPARQL: {{ sparql_error }}
    </div>
    {% endif %}

    <!-- Action Cards selon le rôle -->
    {% if profile.is_conducteur %}
    
    <!-- Section Principale - Actions Prioritaires -->
    <div>
        <h2 class="mb-4 text-xl font-bold text-gray-900">
            <i class="fas fa-star mr-2 text-yellow-500"></i>Actions Principales
        </h2>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
            <!-- Mes Trajets -->
            <a href="{% url 'accounts:trajets_list' %}" class="group cursor-pointer rounded-2xl border-2 border-brand-200 bg-gradient-to-br from-brand-50 to-white p-6 transition hover:border-brand-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-brand-600 shadow-lg">
                    <i class="fas fa-route text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Mes Trajets</h3>
                <p class="text-sm text-gray-600">Créer, modifier et gérer vos trajets</p>
                <div class="mt-4 flex items-center text-brand-600 font-semibold">
                    <span>Gérer mes trajets</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>

            <!-- Mon Véhicule -->
            <a href="{% url 'accounts:vehicules_list' %}" class="group cursor-pointer rounded-2xl border-2 border-green-200 bg-gradient-to-br from-green-50 to-white p-6 transition hover:border-green-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-green-600 shadow-lg">
                    <i class="fas fa-car-side text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Mon Véhicule</h3>
                <p class="text-sm text-gray-600">Consulter les informations de mon véhicule</p>
                <div class="mt-4 flex items-center text-green-600 font-semibold">
                    <span>Voir mon véhicule</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>

            <!-- Mes Statistiques -->
            <a href="{% url 'accounts:mes_statistiques' %}" class="group cursor-pointer rounded-2xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-white p-6 transition hover:border-blue-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-blue-600 shadow-lg">
                    <i class="fas fa-chart-line text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Mes Statistiques</h3>
                <p class="text-sm text-gray-600">Performance, distance, note moyenne</p>
                <div class="mt-4 flex items-center text-blue-600 font-semibold">
                    <span>Voir mes stats</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>
        </div>
    </div>

    <!-- Section Secondaire - Informations Utiles -->
    <div>
        <h2 class="mb-4 text-xl font-bold text-gray-900">
            <i class="fas fa-th mr-2 text-gray-500"></i>Informations Utiles
        </h2>
        <div class="grid grid-cols-2 gap-4 md:grid-cols-2">
            <!-- Mes Réservations -->
            <a href="{% url 'accounts:mes_reservations_conducteur' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-brand-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-brand-100">
                    <i class="fas fa-ticket-alt text-brand-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Réservations</h3>
                <p class="text-xs text-gray-500">Gérer réservations</p>
            </a>

            <!-- Mes Avis -->
            <a href="{% url 'accounts:mes_avis_recus' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-yellow-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-yellow-100">
                    <i class="fas fa-star text-yellow-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Mes Avis</h3>
                <p class="text-xs text-gray-500">Avis reçus</p>
            </a>
        </div>
    </div>

    <!-- Stats rapides pour le conducteur -->
    {% if fuseki_available and vehicles %}
    <div class="grid grid-cols-1 gap-4 md:grid-cols-4">
        <div class="rounded-xl border border-gray-200 bg-gradient-to-br from-blue-50 to-white p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600">Mes Véhicules</p>
                    <h3 class="mt-1 text-3xl font-bold text-gray-900">{{ vehicles|length }}</h3>
                </div>
                <div class="flex h-14 w-14 items-center justify-center rounded-xl bg-blue-100">
                    <i class="fas fa-car text-blue-600 text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="rounded-xl border border-gray-200 bg-gradient-to-br from-green-50 to-white p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600">Mes Trajets</p>
                    <h3 class="mt-1 text-3xl font-bold text-gray-900">--</h3>
                </div>
                <div class="flex h-14 w-14 items-center justify-center rounded-xl bg-green-100">
                    <i class="fas fa-route text-green-600 text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="rounded-xl border border-gray-200 bg-gradient-to-br from-purple-50 to-white p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600">Distance Totale</p>
                    <h3 class="mt-1 text-3xl font-bold text-gray-900">--</h3>
                </div>
                <div class="flex h-14 w-14 items-center justify-center rounded-xl bg-purple-100">
                    <i class="fas fa-road text-purple-600 text-2xl"></i>
                </div>
            </div>
        </div>

        <div class="rounded-xl border border-gray-200 bg-gradient-to-br from-yellow-50 to-white p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600">Note Moyenne</p>
                    <h3 class="mt-1 text-3xl font-bold text-gray-900">--</h3>
                </div>
                <div class="flex h-14 w-14 items-center justify-center rounded-xl bg-yellow-100">
                    <i class="fas fa-star text-yellow-600 text-2xl"></i>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    {% elif profile.is_passager %}
    
    <!-- Section Principale - Actions Prioritaires -->
    <div>
        <h2 class="mb-4 text-xl font-bold text-gray-900">
            <i class="fas fa-star mr-2 text-yellow-500"></i>Actions Principales
        </h2>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            <!-- Rechercher Trajet -->
            <a href="{% url 'accounts:search_trajets' %}" class="group cursor-pointer rounded-2xl border-2 border-brand-200 bg-gradient-to-br from-brand-50 to-white p-6 transition hover:border-brand-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-brand-600 shadow-lg">
                    <i class="fas fa-search-location text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Rechercher un Trajet</h3>
                <p class="text-sm text-gray-600">Recherche avancée par ville, station et horaire</p>
                <div class="mt-4 flex items-center text-brand-600 font-semibold">
                    <span>Rechercher</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>

            <!-- Mes Réservations -->
            <a href="{% url 'accounts:mes_reservations' %}" class="group cursor-pointer rounded-2xl border-2 border-green-200 bg-gradient-to-br from-green-50 to-white p-6 transition hover:border-green-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-green-600 shadow-lg">
                    <i class="fas fa-ticket-alt text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Mes Réservations</h3>
                <p class="text-sm text-gray-600">Consulter et gérer mes réservations de trajets</p>
                <div class="mt-4 flex items-center text-green-600 font-semibold">
                    <span>Voir mes réservations</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>
        </div>
    </div>

    <!-- Section Secondaire - Alertes Trafic -->
    <div>
        <h2 class="mb-4 text-xl font-bold text-gray-900">
            <i class="fas fa-exclamation-triangle mr-2 text-orange-500"></i>Alertes Trafic
        </h2>
        <a href="{% url 'accounts:evenements_list' %}" class="group cursor-pointer rounded-2xl border-2 border-orange-200 bg-gradient-to-br from-orange-50 to-white p-6 transition hover:border-orange-400 hover:shadow-xl block">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="flex h-16 w-16 items-center justify-center rounded-xl bg-orange-600 shadow-lg">
                        <i class="fas fa-exclamation-triangle text-white text-3xl"></i>
                    </div>
                    <div>
                        <h3 class="mb-1 text-xl font-bold text-gray-900">Événements de Trafic</h3>
                        <p class="text-sm text-gray-600">Consulter les incidents et alertes en cours</p>
                    </div>
                </div>
                <div class="flex items-center text-orange-600 font-semibold">
                    <span>Consulter</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </div>
        </a>
    </div>

    <!-- Stats rapides pour le passager -->
    {% if fuseki_available %}
    <div class="grid grid-cols-1 gap-4 md:grid-cols-1">
        <div class="rounded-2xl border border-gray-200 bg-gradient-to-br from-green-50 to-white p-8">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm text-gray-600 mb-2">Trajets Disponibles</p>
                    <h3 class="text-5xl font-bold text-gray-900">{% if trips %}{{ trips|length }}{% else %}0{% endif %}</h3>
                    <p class="mt-2 text-sm text-gray-500">trajets disponibles à la réservation</p>
                </div>
                <div class="flex h-20 w-20 items-center justify-center rounded-2xl bg-green-100">
                    <i class="fas fa-route text-green-600 text-4xl"></i>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    {% elif profile.is_gestionnaire %}
    
    <!-- Section Principale - Actions Prioritaires -->
    <div>
        <h2 class="mb-4 text-xl font-bold text-gray-900">
            <i class="fas fa-star mr-2 text-yellow-500"></i>Gestion Principale
        </h2>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
            <!-- Gérer les Stations -->
            <a href="{% url 'accounts:stations_list' %}" class="group cursor-pointer rounded-2xl border-2 border-brand-200 bg-gradient-to-br from-brand-50 to-white p-6 transition hover:border-brand-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-brand-600 shadow-lg">
                    <i class="fas fa-map-marker-alt text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Gérer les Stations</h3>
                <p class="text-sm text-gray-600">Ajouter, modifier et supprimer des stations</p>
                <div class="mt-4 flex items-center text-brand-600 font-semibold">
                    <span>Gérer</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>

            <!-- Gérer les Véhicules -->
            <a href="{% url 'accounts:vehicules_list' %}" class="group cursor-pointer rounded-2xl border-2 border-green-200 bg-gradient-to-br from-green-50 to-white p-6 transition hover:border-green-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-green-600 shadow-lg">
                    <i class="fas fa-bus text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Gérer les Véhicules</h3>
                <p class="text-sm text-gray-600">Gérer la flotte de transport complète</p>
                <div class="mt-4 flex items-center text-green-600 font-semibold">
                    <span>Gérer</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>

            <!-- Trajets -->
            <a href="{% url 'accounts:trajets_list' %}" class="group cursor-pointer rounded-2xl border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-white p-6 transition hover:border-blue-400 hover:shadow-xl block">
                <div class="mb-4 flex h-16 w-16 items-center justify-center rounded-xl bg-blue-600 shadow-lg">
                    <i class="fas fa-route text-white text-3xl"></i>
                </div>
                <h3 class="mb-2 text-xl font-bold text-gray-900">Gérer les Trajets</h3>
                <p class="text-sm text-gray-600">Consulter et gérer tous les trajets</p>
                <div class="mt-4 flex items-center text-blue-600 font-semibold">
                    <span>Consulter</span>
                    <i class="fas fa-arrow-right ml-2 text-sm"></i>
                </div>
            </a>
        </div>
    </div>

    <!-- Section Secondaire - Autres Services -->
    <div>
        <h2 class="mb-4 text-xl font-bold text-gray-900">
            <i class="fas fa-th mr-2 text-gray-500"></i>Autres Outils de Gestion
        </h2>
        <div class="grid grid-cols-2 gap-4 md:grid-cols-4 lg:grid-cols-6">
            <!-- Horaires -->
            <a href="{% url 'accounts:horaires_list' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-purple-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100">
                    <i class="fas fa-clock text-purple-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Horaires</h3>
                <p class="text-xs text-gray-500">Planification</p>
            </a>

            <!-- Parkings -->
            <a href="{% url 'accounts:parkings_list' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-indigo-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-indigo-100">
                    <i class="fas fa-parking text-indigo-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Parkings</h3>
                <p class="text-xs text-gray-500">Gestion places</p>
            </a>

            <!-- Routes -->
            <a href="{% url 'accounts:routes_list' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-cyan-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-cyan-100">
                    <i class="fas fa-road text-cyan-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Routes</h3>
                <p class="text-xs text-gray-500">Infrastructure</p>
            </a>

            <!-- Événements -->
            <a href="{% url 'accounts:evenements_list' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-orange-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100">
                    <i class="fas fa-exclamation-triangle text-orange-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Événements</h3>
                <p class="text-xs text-gray-500">Incidents</p>
            </a>

            <!-- Capteurs -->
            <a href="{% url 'accounts:capteurs_list' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-pink-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-pink-100">
                    <i class="fas fa-microchip text-pink-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Capteurs</h3>
                <p class="text-xs text-gray-500">IoT Monitoring</p>
            </a>

            <!-- Villes -->
            <a href="{% url 'accounts:villes_list' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-teal-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-teal-100">
                    <i class="fas fa-city text-teal-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Villes</h3>
                <p class="text-xs text-gray-500">Zones gérées</p>
            </a>

            <!-- Réservations -->
            <a href="{% url 'accounts:toutes_reservations' %}" class="group cursor-pointer rounded-xl border border-gray-200 bg-white p-4 transition hover:border-yellow-300 hover:shadow-md block">
                <div class="mb-3 flex h-12 w-12 items-center justify-center rounded-lg bg-yellow-100">
                    <i class="fas fa-ticket-alt text-yellow-600 text-xl"></i>
                </div>
                <h3 class="mb-1 text-sm font-semibold text-gray-900">Réservations</h3>
                <p class="text-xs text-gray-500">Supervision</p>
            </a>
        </div>
    </div>

    {% endif %}

    <!-- Données SPARQL pour Gestionnaire -->
    {% if profile.is_gestionnaire and fuseki_available and not sparql_error %}
    
    <!-- Stats Cards -->
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4">
        <div class="rounded-2xl border border-gray-200 bg-white p-6">
            <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-blue-light-100bg-blue-light-900">
                <i class="fas fa-map-marker-alt text-blue-light-600 text-xltext-blue-light-400"></i>
            </div>
            <p class="text-sm text-gray-600 text-gray-600">Stations</p>
            <h3 class="mt-2 text-3xl font-bold text-gray-900 text-gray-900">{% if stations %}{{ stations|length }}{% else %}0{% endif %}</h3>
        </div>

        <div class="rounded-2xl border border-gray-200 bg-white p-6">
            <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-orange-100bg-orange-900">
                <i class="fas fa-bus text-orange-600 text-xltext-orange-400"></i>
            </div>
            <p class="text-sm text-gray-600 text-gray-600">Véhicules</p>
            <h3 class="mt-2 text-3xl font-bold text-gray-900 text-gray-900">{% if vehicles %}{{ vehicles|length }}{% else %}0{% endif %}</h3>
        </div>

        <div class="rounded-2xl border border-gray-200 bg-white p-6">
            <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-yellow-100bg-yellow-900">
                <i class="fas fa-exclamation-triangle text-yellow-600 text-xltext-yellow-400"></i>
            </div>
            <p class="text-sm text-gray-600 text-gray-600">Événements</p>
            <h3 class="mt-2 text-3xl font-bold text-gray-900 text-gray-900">{% if events %}{{ events|length }}{% else %}0{% endif %}</h3>
        </div>

        <div class="rounded-2xl border border-gray-200 bg-white p-6">
            <div class="mb-4 flex h-12 w-12 items-center justify-center rounded-xl bg-purple-100bg-purple-900">
                <i class="fas fa-users text-purple-600 text-xltext-purple-400"></i>
            </div>
            <p class="text-sm text-gray-600 text-gray-600">Utilisateurs</p>
            <h3 class="mt-2 text-3xl font-bold text-gray-900 text-gray-900">1</h3>
        </div>
    </div>

    <!-- Tableau Stations -->
    {% if stations %}
    <div class="rounded-2xl border border-gray-200 bg-white">
        <div class="border-b border-gray-200 px-6 py-5border-gray-800">
            <h3 class="text-lg font-semibold text-gray-900 text-gray-900">
                <i class="fas fa-map-marker-alt mr-2 text-brand-600"></i>Stations ({{ stations|length }})
            </h3>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-50bg-gray-800">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 text-gray-600">Nom</th>
                        <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 text-gray-600">Adresse</th>
                        <th class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 text-gray-600">Type</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200divide-gray-800">
                    {% for station in stations %}
                    <tr class="hover:bg-gray-50hover:bg-gray-800">
                        <td class="px-6 py-4 text-sm font-medium text-gray-900 text-gray-900">{{ station.nom|default:"N/A" }}</td>
                        <td class="px-6 py-4 text-sm text-gray-600 text-gray-600">{{ station.adresse|default:"-" }}</td>
                        <td class="px-6 py-4">
                            <span class="rounded-full bg-brand-100 px-3 py-1 text-xs font-medium text-brand-800 text-brand-600">{{ station.type|default:"Station" }}</span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}

    {% endif %}

    
</div>
{% endblock %}

